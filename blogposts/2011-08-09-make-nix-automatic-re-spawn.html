---
title: "Make *nix automatic re-spawn a process/service if stopped"
layout: "post"
permalink: "/2011/08/make-nix-automatic-re-spawn.html"
uuid: "8125663160614664917"
guid: "tag:blogger.com,1999:blog-7154053114439400556.post-8125663160614664917"
date: "2011-08-09 14:49:00"
updated: "2011-08-09 14:49:44"
description: 
blogger:
    siteid: "7154053114439400556"
    postid: "8125663160614664917"
    comments: "0"
categories: [process, linux, shell, script, Monitor]
author: 
    name: "Abhishek Kumar"
    url: "https://plus.google.com/101727951948779643819?rel=author"
    image: "//lh3.googleusercontent.com/-W9k8dvLdOvs/AAAAAAAAAAI/AAAAAAAAAAA/4hC44lb5sNw/s512-c/photo.jpg"
---

<div class="css-full-post-content js-full-post-content">
<div dir="ltr" style="text-align: left;" trbidi="on"><br />To make your *nix system automatic re-spawn a process/service if stopped ~<br /><br />Write a shell script to check for presence of a service and start it if it is not running.<br />Then attach that shell-script to a cronjob running at frequent intervals.<br /><br />Example Script to monitor Apache HTTPD web server and start it if is not started ~<br /><blockquote><b><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">#!/bin/sh</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">pids_=`ps ax | grep /usr/sbin/httpd | grep -v grep | wc -l `</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">if [ $pids_ -ne 0 ];</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">then</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp; echo "Apache is running"</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">else</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp; echo "Apache was stopped. Starting..."</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp; apache_start_=`/etc/init.d/httpd start`</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp; if [ $? -eq 0 ];</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp; then</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Apache Started Successfully"</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp; fi</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">fi</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">#############################</span></b></blockquote>&nbsp;this simply checks for HTTPD process to be present and re-spawn the service in absence of even a single process thread.<br /><br />There is a wonderful Ruby utility "<b><a href="http://www.blogger.com/">bluepill</a></b>" to achieve the same solution in a more advanced and comfortable manner. Cover it sooooon.....</div>
</div>