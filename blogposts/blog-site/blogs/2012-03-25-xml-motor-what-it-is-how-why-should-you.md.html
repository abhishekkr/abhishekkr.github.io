<div class="css-full-post-content js-full-post-content">
<div dir="ltr" style="text-align: left;" trbidi="on">
<div style="text-align: right;">
<i><b>xml-motor ~ what it is; why &amp; how you should use it</b></i>
</div>
<div>
<br />Download this article as pdf on what,why,how<br /><a href="http://speakerdeck.com/u/abhishekkr/p/xml-motor-whatwhyhow-this-xml-parsing-rubygem#">http://speakerdeck.com/u/abhishekkr/p/xml-motor-whatwhyhow-this-xml-parsing-rubygem#</a><br /><br />
<script src="http://speakerdeck.com/embed/4f6e6818933f08001f00b579.js"></script>
<br />or read it all here.....<br /><br />
</div>
Late 2011, I started with a new rubygem project for parsing xml, html content.<br />  <b><i><span class="citation">@Rubygems</span>:</i></b> <a href="http://rubygems.org/gems/xml-motor">http://rubygems.org/gems/xml-motor</a><br />  <b><i><span class="citation">@GitHub</span>     :</i></b> <a href="https://github.com/abhishekkr/rubygem_xml_motor">https://github.com/abhishekkr/rubygem_xml_motor</a><br /><br />Just created it to test out my work at compact, quick &amp; easy xml-parsing algorithm... can see that<br />  <b><i><span class="citation">@Slideshare</span>:</i></b> <a href="http://www.slideshare.net/AbhishekKr/xmlmotor">http://www.slideshare.net/AbhishekKr/xmlmotor</a><br /><br />So, currently this is a <b><i>non-native</i></b>, completely <b><i>independent less-than-250 ruby-LOC</i></b> available as a simple rubygem to be require-d and <b><i>use in an easy freehand notation and match with any node attributes</i></b>.<br /><br /><b>Current Features:</b><br />
<ul style="text-align: left;"><li>
Has a single method access to parse require xml nodes from content or file. Use it only if you are gonna parse that xml-content once. For using same xml-content more than once, follow the 3-way step mentioned in examples.
</li><li>
It doesn't depend on presence of any other system library, purely non-native.
</li><li>
It parses broken or corrupted xml/html content correctly, just for the content it have.
</li><li>
Can parse results on looking for node-names, attributes of node or both.
</li><li>
Uses free-freehand notation to retrieve desired xml nodes<br />if your xml looks like,<br /><i><span class="Apple-style-span" style="font-family: Times, &#39;Times New Roman&#39;, serif;">'&lt;library&gt;...<br />  &lt;book&gt; &lt;title&gt;ABC&lt;/title&gt; &lt;author&gt;CBA&lt;/author&gt; &lt;/book&gt;...<br />  &lt;book&gt;<br />    &lt;title&gt;XYZ&lt;/title&gt;<br />     &lt;authors&gt; &lt;author&gt;XY&lt;/author&gt;&lt;author&gt;YZ&lt;/author&gt; &lt;/authors&gt;&lt;/book&gt;... <br />&lt;/library&gt;'</span></i><br />and you look for 'book.author',<br />then, you'll get back <i>['CBA', 'XY', 'YZ']</i>;<br />what that means is the child-node could be at any depth in the parent-node.
</li><li>
Default return mode is without the tags, there is a switch to get the nodes.<br />as you'd have seen in above example:<br />'<i>CBA</i>' gets sent by default, not '<i><author>CBA</author></i>'
</li><li>
To filter your nodes on the basis of attributes, single or multiple attributes can be provided.
</li><li>
These attribute searches can be combined up with freehand node name searches.
</li><li>
<b><i>Readme (a bit weird):</i></b> <a href="https://raw.github.com/abhishekkr/rubygem_xml_motor/master/README">https://raw.github.com/abhishekkr/rubygem_xml_motor/master/README</a>
</li></ul>
<div>
<b><br /></b>
</div>
<div>
<b><br /></b>
</div>
<div>
<b>Features To Come:</b><br />
<ul style="text-align: left;"><li>
Work on making it more performance efficient.
</li><li>
Limit over result-nodes retrieved from start/end of matching nodes.
</li><li>
Multi-node attribute-based filter for a hierarchical node search.
</li><li>
Add dev-knows CSS Selector, it's already present using attribute based search... just need to add a mapping method.
</li></ul>
<div>
<br />
</div>
<div>
<br />
</div>
<b>EXAMPLES of usage:</b><br /><b><i>example code to try: </i></b><a href="https://github.com/abhishekkr/axml-motor/tree/master/ruby/examples">https://github.com/abhishekkr/axml-motor/tree/master/ruby/examples</a>
</div>
<div>
<ul style="text-align: left;"><li>
say, you have an xml file <b><i>'dummy.xml'</i></b>, with data as<br /><i>&lt;dummy&gt;<br />  &lt;ummy&gt;    &lt;mmy class=&quot;sys&quot;&gt;non-native&lt;/mmy&gt;  &lt;/ummy&gt;<br />  &lt;ummy&gt;<br />    &lt;mmy class=&quot;sys&quot;&gt;      &lt;my class=&quot;sys&quot; id=&quot;mem&quot;&gt;compact&lt;/my&gt;    &lt;/mmy&gt;<br />  &lt;/ummy&gt;<br />  &lt;mmy type=&quot;user&quot;&gt;    &lt;my class=&quot;usage&quot;&gt;easy&lt;/my&gt;  &lt;/mmy&gt;&lt;/dummy&gt;</i>
</li><li>
its available at rubygems.org, install it as<br />  $ <i>gem install xml-motor</i>
</li><li>
include it in your ruby code,<br /><span class="Apple-style-span" style="font-family: &#39;Courier New&#39;, Courier, monospace;">  #!/usr/bin/env ruby<br />  require 'xml-motor'</span>
</li><li>
get the XML Filename and/or XML data available<br /><span class="Apple-style-span" style="font-family: &#39;Courier New&#39;, Courier, monospace;">  fyl = </span><span class="Apple-style-span" style="font-family: Times, &#39;Times New Roman&#39;, serif;">File.join(File.expand_path(File.dirname <strong>FILE</strong>),</span><span class="Apple-style-span" style="font-family: &#39;Courier New&#39;, Courier, monospace;">'dummy.xml'</span><span class="Apple-style-span" style="font-family: Times, &#39;Times New Roman&#39;, serif;">)</span><br /><span class="Apple-style-span" style="font-family: &#39;Courier New&#39;, Courier, monospace;">  xml = File.open(fyl,'r'){|fr| fr.read }</span>
</li><li>
One-time XML-Parsing directly from file<br /><span class="Apple-style-span" style="font-family: &#39;Courier New&#39;, Courier, monospace;">  XMLMotor.get_node_from_file(fyl, 'ummy.mmy', 'class=&quot;sys&quot;')</span><br /><span class="Apple-style-span" style="font-family: Times, &#39;Times New Roman&#39;, serif;"><i>     Result: </i></span><span class="Apple-style-span" style="font-family: Times, &#39;Times New Roman&#39;, serif;">[&quot;non-native&quot;, &quot;     <my class="\&quot;sys\&quot;" id="\&quot;mem\&quot;">compact</my>   &quot;]</span>
</li><li>
One-time XML-Parsing directly from content<br /><span class="Apple-style-span" style="font-family: &#39;Courier New&#39;, Courier, monospace;">  XMLMotor.get_node_from_content xml, 'dummy.my', 'class=&quot;usage&quot;'</span><br /><span class="Apple-style-span" style="font-family: Times, &#39;Times New Roman&#39;, serif;"><i>     Result:</i> [&quot;easy&quot;]</span><br />  
</li><li>
Way to go for XML-Parsing for xml node searches<br /><span class="Apple-style-span" style="font-family: &#39;Courier New&#39;, Courier, monospace;">  xsplit = XMLMotor.splitter xml<br />  xtags  = XMLMotor.indexify xsplit</span><br /><i><br />  [] just normal node name based freehand notation to search:</i><br />    <span class="Apple-style-span" style="font-family: &#39;Courier New&#39;, Courier, monospace;">XMLMotor.xmldata xsplit, xtags, 'dummy.my'</span><br /><span class="Apple-style-span" style="font-family: Times, &#39;Times New Roman&#39;, serif;"><i>    Result:</i> [&quot;compact&quot;, &quot;easy&quot;]</span><br /><i>  [] searching for values of required nodes filtered by attribute:</i><br />    <span class="Apple-style-span" style="font-family: &#39;Courier New&#39;, Courier, monospace;">XMLMotor.xmldata xsplit, xtags, nil, 'class=&quot;usage&quot;'</span><br /><span class="Apple-style-span" style="font-family: Times, &#39;Times New Roman&#39;, serif;"><i>    Result:</i> [&quot;easy&quot;]</span><br /><i><br />  [] searching for values of required nodes filtered by freehand tag-name notation &amp; attribute:</i><br />    <span class="Apple-style-span" style="font-family: &#39;Courier New&#39;, Courier, monospace;">XMLMotor.xmldata xsplit, xtags, 'dummy.my', 'class=&quot;usage&quot;'</span><br /><span class="Apple-style-span" style="font-family: Times, &#39;Times New Roman&#39;, serif;"><i>    Result:</i> [&quot;easy&quot;]</span><br /><i><br />  [] searching for values of required nodes filtered by freehand tag-name notation &amp; multiple attributes:</i><br />    <span class="Apple-style-span" style="font-family: &#39;Courier New&#39;, Courier, monospace;">XMLMotor.xmldata xsplit, xtags, 'dummy.my', ['class=&quot;sys&quot;', 'id=&quot;mem&quot;']</span><br /><span class="Apple-style-span" style="font-family: Times, &#39;Times New Roman&#39;, serif;"><i>    Result:</i> [&quot;compact&quot;]</span>
</li></ul>
</div>
</div>
</div>
